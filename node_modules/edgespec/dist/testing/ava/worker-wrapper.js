import { Worker } from "./worker.js";
const needsToNegotiateProtocol = (arg) => {
    return (typeof arg.negotiateProtocol === "function");
};
const workerWrapper = async (arg) => {
    const protocol = needsToNegotiateProtocol(arg)
        ? arg.negotiateProtocol(["ava-4"]).ready()
        : arg;
    const { initialData } = protocol;
    const worker = new Worker(initialData);
    for await (const testWorker of protocol.testWorkers()) {
        void worker.handleTestWorker(testWorker);
    }
};
export default workerWrapper;
